{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,iEAYMC,EAAO,CACXC,KAAMC,SAASC,cAAc,gBAC7BC,UAAWF,SAASC,cAAc,yBAClCE,QAASH,SAASC,cAAc,YAChCG,YAAaJ,SAASC,cAAc,cACpCI,OAAQL,SAASC,cAAc,YAGjCH,EAAKI,UAAUI,mBAAmB,YAAaC,EAAAC,WAC/C,IAAMC,EAAoB,IAAI,EAAAC,EAAAC,SACxBC,EAAuB,IAAIC,EAAAC,GAAJ,CAAmB,c,SAKjCC,I,OAAAA,EAAfF,EAAAjB,EAAA,CAAAiB,EAAAG,GAAAC,MAAA,SAAAC,EAA4BC,G,IAKpBC,EAUwBC,EAApBC,EAAWC,E,qEAdrBJ,EAAIK,iBACJC,IACAC,IACAjB,EAAkBkB,YACZP,EAAQD,EAAIS,OAAOC,SAASC,YAAYC,MAAMC,O,SAEtC,KAAVZ,EAAY,C,gBAGd,MAFAa,EAAAC,OAAOC,QAAQ,8CACfC,IACM,IAAIC,MAAM,e,eAElB5B,EAAkBqB,YAAcV,EAChCkB,I,UAEoC7B,EAAkB8B,c,WAAxBlB,EAAqCmB,EAAAC,KAAzDnB,EAAoBD,EAApBC,UAAWC,EAASF,EAATE,KAEnBd,EAAkBiC,cAAgBC,KAAKC,KAAKtB,EAAY,IACpDb,EAAkBoC,qBACpBC,IAGgB,IAAdxB,EAAe,C,gBAKjB,MAJAW,EAAAC,OAAOC,QACL,4EAEFC,IACM,IAAIC,MACR,4E,QAIJJ,EAAAC,OAAOa,QAAQ,oBAA8BC,OAAV1B,EAAU,aAG7C2B,EAFeC,EAAoB3B,IAGnCX,EAAqBuC,UACrBf,IACAgB,I,kDAEAC,QAAQC,IAAGd,EAAAe,I,2DAxCYC,MAAAC,KAAAC,U,UA4CZC,I,OAAAA,EAAf9C,EAAAjB,EAAA,CAAAiB,EAAAG,GAAAC,MAAA,SAAAC,I,IAMYK,E,yEALVE,IACAmC,IACAnD,EAAkBoD,e,kBAGOpD,EAAkB8B,c,OAAnChB,EAAMiB,EAAAC,KAAJlB,KAGR0B,EAFeC,EAAoB3B,IAGnCX,EAAqBuC,UACrBW,IACAhB,IACAM,IAEK3C,EAAkBoC,sBACrBpB,IACAQ,EAAAC,OAAO6B,KAAK,+D,kDAGdV,QAAQC,IAAGd,EAAAe,I,2DApBkBC,MAAAC,KAAAC,U,CAwBjC,SAASR,EAAoBc,GAC3B,OAAOA,EACJC,KACC,SAAAC,G,IACEC,EAAYD,EAAZC,aACAC,EAAaF,EAAbE,cACAC,EAAIH,EAAJG,KACAC,EAAKJ,EAALI,MACAC,EAAKL,EAALK,MACAC,EAASN,EAATM,UACAC,EAAQP,EAARO,S,MAEA,8DAEQzB,OADiBmB,EAAa,sBACPnB,OAAvBoB,EAAc,WAIxBpB,OAJiCqB,EAAK,0FAK/BrB,OADPzC,EAAAmE,SAAS,iBAIT1B,OAHOsB,EAAM,yDAINtB,OADPzC,EAAAoE,SAAS,iBAIT3B,OAHOuB,EAAM,yDAINvB,OADPzC,EAAAqE,YAAY,iBAIZ5B,OAHOyB,EAAS,yDAITzB,OADPzC,EAAAsE,aAAa,iBACI7B,OAAVwB,EAAU,+C,IAKlBM,KAAK,G,CAGV,SAAS7B,EAAc8B,GACrBjF,EAAKK,QAAQG,mBAAmB,YAAayE,E,CAG/C,SAASzC,IACPxC,EAAKK,QAAQ6E,UAAY,E,CAG3B,SAASlC,IACPhD,EAAKM,YAAY6E,UAAUC,OAAO,S,CAGpC,SAASzD,IACP3B,EAAKM,YAAY6E,UAAUE,IAAI,S,CAGjC,SAAS/B,IACP,IAAQgC,EACNtF,EAAKK,QAAQkF,kBAAkBC,wBADzBC,OAGRC,OAAOC,SAAS,CACdC,IAAkB,EAAbN,EACLO,SAAU,U,CAId,SAASjE,IACP5B,EAAKO,OAAO4E,UAAUC,OAAO,S,CAG/B,SAAS9C,IACPtC,EAAKO,OAAO4E,UAAUE,IAAI,S,CAG5B,SAASvB,IACP9D,EAAKO,OAAO4E,UAAUC,OAAO,UAC7BpF,EAAKO,OAAO4E,UAAUE,IAAI,gB,CAG5B,SAASrB,IACPhE,EAAKO,OAAO4E,UAAUE,IAAI,UAC1BrF,EAAKO,OAAO4E,UAAUC,OAAO,gB,CAvJ/BpF,EAAKC,KAAK6F,iBAAiB,U,SAGCzE,G,OAAbJ,EAAYyC,MAAAC,KAAAC,U,IAF3B5D,EAAKM,YAAYwF,iBAAiB,S,kBA8CnBjC,EAAkBH,MAAAC,KAAAC,U","sources":["src/01-index.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport PixabayApiService from './js/pixabay-api-service';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport {\n  svgLikes,\n  svgComments,\n  svgViews,\n  svgDownloads,\n  svgSearch,\n} from './js/svg-icons';\n\nconst refs = {\n  form: document.querySelector('#search-form'),\n  submitBtn: document.querySelector('#search-form > button'),\n  gallery: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n  loader: document.querySelector('.loader'),\n};\n\nrefs.submitBtn.insertAdjacentHTML('beforeend', svgSearch);\nconst pixabayApiService = new PixabayApiService();\nconst simpleLigtboxGallery = new SimpleLightbox('.gallery a');\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n\nasync function onFormSubmit(evt) {\n  evt.preventDefault();\n  hideLoadMoreBtn();\n  showLoader();\n  pixabayApiService.resetPage();\n  const query = evt.target.elements.searchQuery.value.trim();\n  try {\n  if (query === '') {\n    Notify.warning('The input is empty. Please type something.');\n    hideLoader();\n    throw new Error('empty input');\n  }\n  pixabayApiService.searchQuery = query;\n  clearGallery();\n\n    const { totalHits, hits } = await pixabayApiService.fetchImages();\n\n    pixabayApiService.amountOfPages = Math.ceil(totalHits / 40);\n    if (pixabayApiService.canLoadMoreImages()) {\n      showLoadMoreBtn();\n    }\n\n    if (totalHits === 0) {\n      Notify.warning(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      hideLoader();\n      throw new Error(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n    }\n\n    Notify.success(`Hooray! We found ${totalHits} images.`);\n    const markup = createGalleryMarkup(hits);\n\n    renderGallery(markup);\n    simpleLigtboxGallery.refresh();\n    hideLoader();\n    addSmoothScroll();\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nasync function onLoadMoreBtnClick() {\n  hideLoadMoreBtn();\n  showSmallLoader();\n  pixabayApiService.increasePage();\n\n  try {\n    const { hits } = await pixabayApiService.fetchImages();\n    const markup = createGalleryMarkup(hits);\n\n    renderGallery(markup);\n    simpleLigtboxGallery.refresh();\n    hideSmallLoader();\n    showLoadMoreBtn();\n    addSmoothScroll();\n\n    if (!pixabayApiService.canLoadMoreImages()) {\n      hideLoadMoreBtn();\n      Notify.info(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction createGalleryMarkup(list) {\n  return list\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        downloads,\n        comments,\n      }) =>\n        `<div class=\"photo-card\">\n    <a class='card-link' href=\"${webformatURL}\">\n    <img src=\"${largeImageURL}\" alt=\"${tags}\" loading=\"lazy\" />\n    </a>\n    <div class=\"info\">\n    <p class=\"info-item\">\n    ${svgLikes}\n    <span> ${likes} </span>  \n    </p>\n    <p class=\"info-item\">\n    ${svgViews}\n    <span> ${views} </span>  \n    </p>\n    <p class=\"info-item\">\n    ${svgComments}\n    <span> ${comments} </span>  \n    </p>\n    <p class=\"info-item\">\n    ${svgDownloads}\n    <span> ${downloads} </span>  \n    </p>\n    </div>\n    </div>`\n    )\n    .join('');\n}\n\nfunction renderGallery(markup) {\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearGallery() {\n  refs.gallery.innerHTML = '';\n}\n\nfunction showLoadMoreBtn() {\n  refs.loadMoreBtn.classList.remove('hidden');\n}\n\nfunction hideLoadMoreBtn() {\n  refs.loadMoreBtn.classList.add('hidden');\n}\n\nfunction addSmoothScroll() {\n  const { height: cardHeight } =\n    refs.gallery.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nfunction showLoader() {\n  refs.loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  refs.loader.classList.add('hidden');\n}\n\nfunction showSmallLoader() {\n  refs.loader.classList.remove('hidden');\n  refs.loader.classList.add('loader--small');\n}\n\nfunction hideSmallLoader() {\n  refs.loader.classList.add('hidden');\n  refs.loader.classList.remove('loader--small');\n}\n"],"names":["$bpxeT","parcelRequire","$07eb150d622544d8$var$refs","form","document","querySelector","submitBtn","gallery","loadMoreBtn","loader","insertAdjacentHTML","$fnjO1","svgSearch","$07eb150d622544d8$var$pixabayApiService","$aEes8","default","$07eb150d622544d8$var$simpleLigtboxGallery","$parcel$interopDefault","$5IjG7","$07eb150d622544d8$var$_onFormSubmit","$2TvXO","mark","_callee","evt","query","ref","totalHits","hits","preventDefault","$07eb150d622544d8$var$hideLoadMoreBtn","$07eb150d622544d8$var$showLoader","resetPage","target","elements","searchQuery","value","trim","$h6c0i","Notify","warning","$07eb150d622544d8$var$hideLoader","Error","$07eb150d622544d8$var$clearGallery","fetchImages","_ctx","sent","amountOfPages","Math","ceil","canLoadMoreImages","$07eb150d622544d8$var$showLoadMoreBtn","success","concat","$07eb150d622544d8$var$renderGallery","$07eb150d622544d8$var$createGalleryMarkup","refresh","$07eb150d622544d8$var$addSmoothScroll","console","log","t0","apply","this","arguments","$07eb150d622544d8$var$_onLoadMoreBtnClick","$07eb150d622544d8$var$showSmallLoader","increasePage","$07eb150d622544d8$var$hideSmallLoader","info","list","map","param","webformatURL","largeImageURL","tags","likes","views","downloads","comments","svgLikes","svgViews","svgComments","svgDownloads","join","markup","innerHTML","classList","remove","add","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","addEventListener"],"version":3,"file":"01-with-load-more-btn.da71aae4.js.map"}